steps:
# Step 1: Build the Docker image
- name: 'gcr.io/cloud-builders/docker'
  args:
    - 'build'
    - '-t'
    - 'us-central1-docker.pkg.dev/varmalabs/maruthi-100988881/my-app:$COMMIT_SHA'
    - '.'

# Step 2: Push the image to Artifact Registry
- name: 'gcr.io/cloud-builders/docker'
  args:
    - 'push'
    - 'us-central1-docker.pkg.dev/varmalabs/maruthi-100988881/my-app:$COMMIT_SHA'

options:
  logging: CLOUD_LOGGING_ONLY

images:
  - 'us-central1-docker.pkg.dev/varmalabs/maruthi-100988881/my-app:$COMMIT_SHA'